{% load django_vite tutorials_extra static core_extra columns_extra %}
<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- é˜²æ­¢ FOUC (Flash of Unstyled Content) -->
    <script>
      // ç«‹å³æ‰§è¡Œï¼Œé¿å…é¡µé¢é—ªçƒ
      (function() {
        const theme = localStorage.getItem('theme');
        const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (theme === 'dark' || (theme !== 'light' && systemDark)) {
          document.documentElement.classList.add('dark');
        } else {
          document.documentElement.classList.add('light');
        }
      })();
    </script>

    <link href="https://cdn.bootcdn.net/ajax/libs/KaTeX/0.16.8/katex.min.css"
          rel="stylesheet">
    <link rel="icon"
          href="data:image/svg+xml, <svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22> <text y=%22.9em%22 font-size=%2290%22>ğŸ¦‹</text> </svg> " />
      <title>
        {% block title %}
          {{ headline }}
        {% endblock title %}
      </title>
      <link rel="alternate"
            type="application/rss+xml"
            title="è¿½æ¢¦äººç‰©çš„åšå®¢"
            href="{% url 'rss' %}" />
      {% vite_hmr_client %}
      {% vite_asset 'src/main.ts' %}
    </head>
    <body class="antialiased bg-white dark:bg-gray-900">
      {% include "inclusions/_nav.html" %}
      <div class="max-w-7xl mx-auto px-4 lg:px-8">
        <div class="flex flex-col lg:flex-row">
          <!-- left -->
          <div class="fixed -translate-x-full pl-4 pr-6 pt-6 lg:pl-0 bg-white dark:bg-gray-900 opacity-100 right-auto overflow-y-auto bottom-0 left-0 duration-300 z-50 shadow-[4px_0_6px_-4px_rgb(0,0,0,0.1)] lg:shadow-none w-2/3 lg:translate-x-0 lg:left-[max(2rem,calc(50%-38rem))] top-16 lg:w-64"
               id="left">
            {% block left %}
              {% show_profile %}
            {% endblock left %}
          </div>
          <!-- main -->
          <div class="w-full pt-6 lg:px-64">
            {% block main %}
            {% endblock main %}
          </div>
          <!-- right -->
          <div class="lg:pl-6 lg:pr-4 w-full lg:fixed lg:w-64 lg:right-[max(0px,calc(50%-38rem))] lg:top-16 lg:pt-6 lg:overflow-y-auto lg:bottom-0">
            {% block right %}
              {% show_tutorials 999 %}
              {% show_columns 999 %}
            {% endblock right %}
          </div>
        </div>
      </div>
      <span id="backtop"
            class="opacity-0 fixed bottom-4 right-4 lg:right-[max(0px,calc(50%-25rem))] cursor-pointer transition-opacity duration-500 ease-in">
        <img alt="" height="24" width="24" src="{% static 'arrow-up-line.svg' %}" />
      </span>
      {% include "inclusions/_footer.html" %}
      <script src="https://cdn.bootcdn.net/ajax/libs/KaTeX/0.16.8/katex.min.js"></script>
      <script src="https://unpkg.com/mermaid@9.4.0/dist/mermaid.min.js"></script>
    </body>
  </html>
