{% load static %}
{% load notifications_tags %}
{# Navigation bar: sticky header with theme switcher #}
{# Design intent: Transparent background to show gradient, no border for natural layout #}
<div id="site-nav"
     class="sticky top-0 z-[60] w-full flex-none transition-all duration-300"
     data-blur-nav>
  <div class="max-w-[90rem] mx-auto px-4 lg:px-8">
    <div class="py-4">
      <div class="relative flex items-center justify-between">
        <div class="flex items-center">
          <span class="inline-block lg:hidden" id="offcanvas-trigger">
            <img class="dark:invert" height="20" width="20" src="{% static 'menu-fill.svg' %}" />
          </span>
          <a href="{% url 'home' %}"
             class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 lg:static lg:translate-x-0 lg:translate-y-0">
            <span class="text-3xl whitespace-nowrap">ðŸ¦‹</span>
          </a>
        </div>
        <div class="flex items-center gap-2">
          <!-- Theme switcher button with slate hover state -->
          <button id="theme-switcher"
                  class="p-2 rounded-lg hover:bg-slate-100/80 dark:hover:bg-slate-800/50 transition-colors"
                  aria-label="åˆ‡æ¢ä¸»é¢˜">
            <img data-theme-icon="light"
                 height="20"
                 width="20"
                 src="{% static 'sun-fill.svg' %}"
                 alt="äº®è‰²æ¨¡å¼"
                 class="dark:invert hidden" />
            <img data-theme-icon="dark"
                 height="20"
                 width="20"
                 src="{% static 'moon-line.svg' %}"
                 alt="æš—è‰²æ¨¡å¼"
                 class="dark:invert hidden" />
            <img data-theme-icon="system"
                 height="20"
                 width="20"
                 src="{% static 'contrast-fill.svg' %}"
                 alt="è·Ÿéšç³»ç»Ÿ"
                 class="dark:invert hidden" />
          </button>
          {% if user.is_authenticated %}
            {% notifications_unread as num_unread %}
            <a href="{% url 'notify:notification_all' %}"
               class="p-2 rounded-lg hover:bg-slate-100/80 dark:hover:bg-slate-800/50 transition-colors relative"
               aria-label="é€šçŸ¥">
              <i class="ri-notification-3-line text-slate-600 dark:text-slate-400{% if num_unread != 0 %} text-cyan-600 dark:text-cyan-400{% endif %}"></i>
              {% if num_unread != 0 %}
                <span class="absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-cyan-600 dark:bg-cyan-400 text-[10px] font-bold text-white dark:text-slate-900">
                  {% if num_unread > 99 %}99+{% else %}{{ num_unread }}{% endif %}
                </span>
              {% endif %}
            </a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
